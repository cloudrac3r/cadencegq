<!-- TEMPLATE pre -->
<title>Crumpet user manual</title>
<style>
    main {
        max-width: 700px;
        margin: 0 auto;
    }
    .asterisk-note {
        font-size: 0.8em;
    }
    img {
        max-width: 100%;
    }
    pre {
        white-space: pre-line;
        width: auto;
    }
</style>
<!-- TEMPLATE header -->
<main>
    <header>
        <h1>Crumpet user manual</h1>
        <p>Crumpet is a better editor for Return to Wonderland custom levels.</p>
        <p>
            This document describes how to install and how to use Crumpet to its full potential.
            If you already mostly know what you're doing, you should <a href="#cheat-sheet">jump to the cheat sheet section</a> for a much shorter explanation
            of how to use Crumpet's features.
        </p>
    </header>

    <nav>
        <h2>Table of contents</h2>
        <ul>
            <li><a href="#introduction">Introduction</a></li>
            <li><a href="#get-started">Get started</a></li>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#basic-tile-placement">Basic tile placement</a></li>
            <li><a href="#advanced-editing">Advanced editing</a>
                <ul>
                    <li><a href="#blocks-of-tiles">Blocks of tiles</a></li>
                    <li><a href="#dual-control">Dual control</a></li>
                    <li><a href="#pick-tile">Pick tile</a></li>
                    <li><a href="#undo">Undo</a></li>
                    <li><a href="#scroll-and-zoom">Scroll and zoom</a></li>
                    <li><a href="#move-tile">Move tile</a></li>
                    <li><a href="#ice-path">Ice path</a></li>
                </ul>
            </li>
            <li><a href="#settings">Settings</a></li>
            <li><a href="#saving-and-loading">Saving and loading</a>
                <ul>
                    <li><a href="#using-files-directly">Using files directly</a></li>
                    <li><a href="#downloading-and-uploading">Downloading and uploading</a></li>
                </ul>
            </li>
            <li><a href="#installing-crumpet">Installing Crumpet</a>
                <ul>
                    <li><a href="#prerequisites">Prerequisites</a></li>
                    <li><a href="#automatic-installer">Automatic installer</a></li>
                    <li><a href="#manual-installation">Manual installation</a></li>
                    <li><a href="#the-configuration-page">The configuration page</a></li>
                    <li><a href="#running-crumpet-again">Running Crumpet again</a></li>
                </ul>
            </li>
            <li><a href="#need-help">Need help?</a></li>
            <li><a href="#development-screenshots">Development screenshots</a></li>
            <li><a href="#need-help">Cheat sheet</a></li>
        </ul>
    </nav>
            
    <h2 id="introduction">Introduction</h2>
    <p>
        The built in editor in Return to Wonderland sucks. Building a level is very inconvenient, slow, and annoying.
        This is why I made Crumpet, an editor aimed at removing these problems so you can build better levels faster, and have fun doing so.
    </p>
    <p>How is Crumpet better?</p>
    <ul>
        <li>drop-down list for tile categories lets you switch between categories faster</li>
        <li>dual control editing lets you hold on to two tiles at the same time, one for each mouse button</li>
        <li>middle click to pick a tile already on the map, instead of having to find it in a category</li>
        <li>support for hex edited tiles*</li>
        <li>infinite undo</li>
        <li>real time online co-op editing*</li>
        <li>move tiles in the level without having to change the current tile category</li>
        <li>preview current tileset in the editor instead of the editor's unique textures*</li>
        <li>support for any screen resolution (so long as it's larger than 650×670)</li>
        <li>infinite scroll in any direction, level size automatically adjusts to what you place rather than what you place being constrained by the set level size</li>
        <li>zoom out to get an overview of the level or zoom in to place tiles more precisely</li>
        <li>much less messy sign editor</li>
        <li>better keyboard shortcuts</li>
        <li>save files 100% compatible with built in editor and player</li>
        <li>and more!</li>
    </ul>
    <p class="asterisk-note">(* = planned or incomplete feature)</p>

    <h2 id="get-started">Get started</h2>
    <p>Crumpet runs in your browser. You can <a href="https://cadence.moe/crumpet" target="_blank">view and use the fully functional demo online, no installation required.</a></p>
    <p>
        However, since web browsers won't let Crumpet edit your save files directly, you have to install it for more convenient file access.
        (as in, you must install it to be able to save files directly to your CustomLevels folder)
    </p>
    <p>To learn how to install Crumpet, <a href="#installing-crumpet">jump to the installation section.</a></p>

    <h2 id="overview">Overview</h2>
    <p>Here's a picture of the interface:</p>
    <a href="https://cadence.moe/api/images/65f084"><img src="https://cadence.moe/api/images/65f084" alt="Screenshot of Crumpet interface."></a>
    <p>The big black space with tiles in it is the main level design area, otherwise known as the map.</p>
    <p>The blue panel on the right side of the screen contains tiles that you can place. You can click the dark blue header to change the tile category.</p>
    <p>
        The green panel lets you change the tile place mode, otherwise known as the tool box. The current mode is outlined in dark green.
        The leftmost icon with the pencil lets you place tiles as you would expect from the builtin editor, and is the most useful.
    </p>
    <p>The pink button opens and closes the settings menu.</p>

    <h2 id="basic-tile-placement">Basic tile placement</h2>
    <p>
        First, you need to pick some tiles to place. Let's place some floor tiles.
        Floor is found in either the "common" category or the "terrain" category.
        Open the category picker by clicking the dark blue header, then click on the word "common" to open that category.
    </p>
    <p>Now that the category is open, you can select the floor tile by left clicking it. Once it is selected, a blue border will appear around it.</p>
    <p>
        Now that the floor tile is selected, you can place it on to the map by left clicking where you want it to be placed.
        You can left click and drag to place a line of tiles.
    </p>
    <p>You now know enough to a build a whole level, but there are several techniques that make building a level much faster and more enjoyable.</p>

    <h2 id="advanced-editing">Advanced editing</h2>

    <h3 id="blocks-of-tiles">Blocks of tiles</h3>
    <p>
        Once a tile is selected and has a blue outline, as well as placing it normally by left clicking,
        you can also create a block of tiles by middle clicking and dragging.
        A rectangle will be created with the first corner at where you clicked and the opposite corner at where you released.
    </p>
    <p>
        Middle clicking and dragging might be difficult for some users, so there are some alternatives.
        One alternative is to press both the left and right mouse button at the same time.
        The other alternative is to use the block tool.
    </p>
    <p>
        Select the second item in the green tool box, and you'll be able to left click and drag to create a block.
        Once you're done making blocks, don't forget to set the tile mode back to the ordinary pencil by clicking the first item in the tool box.
        You can also switch to block mode by pressing either B or S on your keyboard, and back to pencil mode afterwards by pressing A.
    </p>

    <h3 id="dual-control">Dual control</h3>
    <p>
        As well as selecting tiles with the left mouse button, you can also select a different tile with the right mouse button.
        Doing so will give that tile a red outline, and right clicking on the map will place whichever tile has the red outline.
    </p>
    <p>Note that you cannot create blocks of tiles with the right button, only the left button.</p>

    <h3 id="pick-tile">Pick tile</h3>
    <p>
        Middle click an existing tile on the map to give that tile a blue outline, which means you can now place it with the left mouse button.
        This makes it really easy and quick to change between different tiles.
    </p>
    <p>
        Be sure not to move the mouse while middle clicking, otherwise you'll start making a block.
        If you accidentally make a block, you can press Ctrl-Z to undo it.
    </p>

    <h3 id="undo">Undo</h3>
    <p>
        Press Ctrl-Z to undo the last thing you placed. You can keep pressing Ctrl-Z forever to undo changes infinitely, but be careful,
        since there's no button to put the tiles back if you undo too much.
    </p>
    <p>If you close the editor, you'll lose the undo history.</p>
    <p>If you make some changes, then load a file, pressing undo will be able to take you back to before the load. Be very careful with this.</p>

    <h3 id="scroll-and-zoom">Scroll and zoom</h3>
    <p>
        Spin the scroll wheel to scroll the map vertically.
        Hold shift at the same time to scroll the map horizontally.
        Hold control at the same time to zoom in or out.
        Press 0 on the keyboard to reset zoom and scroll back to the initial position.
    </p>

    <h3 id="move-tile">Move tile</h3>
    <p>
        You can use the move tool to move a single tile on the map to another position.
        Select the move tool, the third icon in the tool box, and then drag a tile to move it to another position on the map.
        You can also press D to switch to the move tool from any other tool.
    </p>
    <p>Don't forget to switch back to pencil mode afterwards.</p>

    <h3 id="ice-path">Ice path</h3>
    <p>
        The final tool in the tool box creates an ice path. Drag on the map where you want your path to go, and when you release the mouse button,
        parts of the path will be turned into corner pieces so that stinkers can slide from one end to the other.
        This is much more convenient than switching to and placing all those corner tiles manually.
    </p>
    <p>
        You can also make a path of conveyor belts. To do this, left click to select any conveyor belt tile with a blue outline.
        Now, dragging the mouse will create a path of conveyor belts instead of ice.
    </p>
    <p>Left click select a non-conveyor tile to go back to making ice paths.</p>
    <p>You can also press F to switch to the ice path tool. Don't forget to switch back to the pencil (A) when you're done.</p>

    <h2 id="settings">Settings</h2>
    <p>Click the pink button to open or close the settings menu.</p>
    <p>
        When settings is open, you can set the level name, the filename it should be saved as (.LV6 extension will be added automatically),
        the tileset, the background, the music track, the timer, and any custom content directory names.
    </p>
    <p>A filename is required to be able to save your level.</p>
    <p>
        You can also see the size of your level as its width and height.
        If it's less than 14×14, you'll see a warning in that menu, since the builtin editor's minimum size is 14×14.
        However, most levels should still work properly even if they're smaller.
    </p>

    <h2 id="saving-and-loading">Saving and loading</h2>
    <p>
        Crumpet has two types of file management.
        The first is to use the browser's download and upload methods to get and send files to your computer.
        This method is very cumbersome to use.
    </p>
    <p>
        The second method is to save and load files directly from your CustomLevels folder.
        This method is much more convenient, but does not work when accessing the page on the website cadence.moe.
        You have to install Crumpet to be able to use this method. <a href="#installing-crumpet">Jump to the installation section.</a>
    </p>
    <p>You can mix and match the loading and saving methods in whatever way you like, and they will not interfere with or break each other.</p>
    
    <h3 id="using-files-directly">Using files directly</h3>
    <p>Click "save (direct)" to save the current file into your CustomLevels with the name specified in the input box.</p>
    <p>Click "load (direct)" to load from your CustomLevels with the name specified in the input box and overwrite the current map.</p>
    
    <h3 id="downloading-and-uploading">Downloading and uploading</h3>
    <p>
        Click "save (download)" to start a download of the current map data.
        Depending on your web browser, the file will probably go into your computer's Downloads folder,
        and you'll need to manually move it to CustomLevels to play it.
    </p>
    <p>
        Click "load (file)" to open a dialogue box asking which level to load.
        If you want to load a file stored in CustomLevels, you can, but you'll probably have to spend a moment manually navigating to that folder.
    </p>
    
    <h2 id="installing-crumpet">Installing Crumpet</h2>

    <h3 id="prerequisites">Prerequisites</h3>
    <p>
        Crumpet requires node.js 10+, Python 2.7+, and 7-zip. You need to install these first. You can install them in any order.
        If you already have one installed, you don't need to install it again.
    </p>

    <h4>node.js</h4>

    <details>
        <summary>Windows</summary>
        <p>
            <a href="https://nodejs.org/" target="_blank">Go to the node.js website</a> and click the big button with "LTS" written on it
            to download the node.js installer. Run the installer. Click "next" or "yes" through every screen of the installer.
        </p>
    </details>

    <details>
        <summary>Ubuntu</summary>
        <pre>
            curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -
            sudo apt-get install -y nodejs
        </pre>
        <p>Source: <a href="https://github.com/nodesource/distributions/blob/master/README.md#installation-instructions" target="_blank">https://github.com/nodesource/distributions/blob/master/README.md#installation-instructions</a></p>
    </details>

    <details>
        <summary>Arch</summary>
        <pre>
            sudo pacman -S nodejs
        </pre>
    </details>

    <h4>7-Zip</h4>

    <details>
        <summary>Windows</summary>
        <p>
            <a href="https://7-zip.org" target="_blank">Go to the 7-Zip website</a> and look at the list of links at the top of the page.
            Click the "Download" link that's next to "64-bit x64" to download the installer. Run the installer. Click "install".
        </p>
    </details>

    <details>
        <summary>Ubuntu</summary>
        <pre>
            sudo apt install p7zip-full
        </pre>
    </details>

    <details>
        <summary>Arch</summary>
        <pre>
            sudo pacman -S p7zip-full
        </pre>
    </details>
    
    <p>After you have installed both node.js and 7-Zip, you can move on to the next section.</p>

    <h3 id="automatic-installer">Automatic installer</h3>
    <p>For most systems, you should be able to use Crumpet's automatic installer.</p>
    <p>
        First, <a href="https://cadence.moe/api/pastes/183/raw" target="_blank">open the install script</a>. Right click the background of that page and choose "save as"
        or "save page as". Save the file on to the desktop with the name "install.ps1".
    </p>
    <p>
        Run the installer by right clicking the new install.ps1 file and choosing "run with powershell". If you get asked
        "are you sure you want to open this", uncheck the "always ask" checkbox and then click "open".
    </p>
    <p>Follow the instructions in the Crumpet installer. If Crumpet eventually opens in your browser, then congratulations, it worked! You're done.</p>

    <h3 id="manual-installation">Manual installation</h3>

    <p>Download and extract <a href="https://github.com/cloudrac3r/cadencegq/archive/master.zip" target="_blank">this zip file containing Crumpet.</a></p>
    <p>Open npm-install.bat, and once that finishes, open start.bat. Crumpet should run the configuration process and then open.</p>
    
    <h3 id="the-configuration-page">The configuration page</h3>
    
    <p>If you got sent to the configuration page, that means something in the automatic detection process went wrong. Follow these steps to fix it.</p>
    <p>
        First of all, make sure Return To Wonderland is installed on this computer, and make sure you haven't modified the file res2.dat.
        (e.g. installing custom textures or mods might replace res2.dat.) You won't be able to install Crumpet unless you have an official unmodified
        copy of res2.dat, to prevent software piracy.
    </p>
    <p>
        Push "detect installation", and the text boxes should fill with data. If they don't, you should manually insert the paths to
        RTW's installation folder and CustomLevels folder into the text boxes. After pressing the detect button or typing things in,
        you'll need to press "save paths" to confirm.
    </p>
    <p>
        After filling in the boxes, press "install/update" to verify that your RTW installation is legit, and download the Crumpet textures from
        the server. Once the message changes to "images are installed", you can click the link at the top of the page to open Crumpet.
        If you see an error alert, you should try to figure out what the errors means and resolve it on your own.
    </p>

    <h3 id="running-crumpet-again">Running Crumpet again</h3>

    <p>If you used the automatic installer, click the new Crumpet shortcut on your desktop and Crumpet will open immediately.</p>
    <p>If you installed manually, open start.bat, which will launch Crumpet.</p>
    
    <h2 id="need-help">Need help?</h2>
    <p>Reply to the topic on the forums and I'll do my best to help you.</p>
    
    <h2 id="development-screenshots">Development screenshots</h2>
    <h4>June 1 to 7</h4>
    <p>
        <a href="https://cdn.discordapp.com/attachments/373335332436967424/452075239736737792/2018-06-01_23-43-11.mp4">Spamming wood blocks</a>
        / <a href="https://cdn.discordapp.com/attachments/373335332436967424/452695372746457088/2018-06-03_16-47-04.mp4">Three buttons</a>
        / <a href="https://cdn.discordapp.com/attachments/373335332436967424/452793997081968660/2018-06-03_23-19-03.mp4">Actual tile selector</a>
        / <a href="https://cdn.discordapp.com/attachments/373335332436967424/453095910596018176/unknown.png">Several tiles</a>
        / <a href="https://cdn.discordapp.com/attachments/373335332436967424/453369385462267922/2018-06-05_13-21-31.mp4">Dropdown selector</a>
        / <a href="https://cdn.discordapp.com/attachments/373335332436967424/453844781970227200/unknown.png">Use in game textures</a>
        / <a href="https://cdn.discordapp.com/attachments/373335332436967424/454225858878504960/unknown.png">Use editor textures</a>
    </p>
    <h4>November 12 to 18</h4>
    <p>
        <a href="https://cdn.discordapp.com/attachments/373335332436967424/511396562434392076/unknown.png">Options menu</a>
        / <a href="https://cdn.discordapp.com/attachments/373335332436967424/513553443865100309/2018-11-18_16-14-40.mp4">Ice paths</a>
        / <a href="https://cdn.discordapp.com/attachments/373335332436967424/513601385149890580/unknown.png">Hex display</a>
        / <a href="https://cdn.discordapp.com/attachments/509409039927738388/513637820313894932/unknown.png">Actual game saves</a>
    </p>
    <h4>May 4 to 10</h4>
    <p>
        <a href="https://cdn.discordapp.com/attachments/373335332436967424/574834508801638420/unknown.png">Configuration page</a><br>
        And lots and lots of finishing touches.
    </p>


    <h2 id="cheat-sheet">Cheat sheet</h2>
    <p>
        Left click or right click to place tiles assigned to that mouse button.<br>
        Middle click to pick the hovered tile to the left mouse button.<br>
        Middle click and drag to create a block of tiles with the tile from the left mouse button.<br>
        Mouse wheel scrolls up/down, shift+mouse wheel scrolls left/right, ctrl+mouse wheel zooms in/out.<br>
        Ctrl-Z is infinite undo. No redo, so be careful.<br>
        The green box contains tile placement tools. The tools, from left to right, are pencil (A), block (S or B), drag and drop (D), ice path (F).<br>
        Select a conveyor tile and use the ice path tool to create a conveyor path instead.<br>
        The purple button opens the screen of settings and save/load buttons.
        Using the "server" buttons will save directly to the CustomLevels folder on your computer.
    </p>
</main>